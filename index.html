<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Karasuno Volleyball Team 2012‚Äì2013</title>
  <style>
/* --- Ti·ªÉu s·ª≠ Karasuno --- */
/* --- Ph·∫ßn b·ªë c·ª•c ngang cho Ti·ªÉu s·ª≠ --- */
.intro {
  max-width: 1200px;           /* Gi·ªõi h·∫°n chi·ªÅu r·ªông to√†n kh·ªëi */
  margin: 60px auto;           /* CƒÉn gi·ªØa trang v√† c√°ch tr√™n d∆∞·ªõi */
  padding: 0 40px;             /* C√°ch ƒë·ªÅu hai b√™n l·ªÅ */
  background: var(--card-bg);  /* N·ªÅn nh·∫π */
  border-radius: 18px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.4);
}

.intro-content {
  display: flex;
  flex-direction: row;          /* X·∫øp ch·ªØ v√† ·∫£nh theo h√†ng ngang */
  align-items: flex-start;
  justify-content: space-between;
  gap: 40px;                    /* Kho·∫£ng c√°ch gi·ªØa ch·ªØ v√† ·∫£nh */
  flex-wrap: nowrap;
}

.intro-text {
  flex: 1 1 55%;                /* Ch·ªØ chi·∫øm 55% */
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--text);
  text-align: justify;          /* CƒÉn ƒë·ªÅu 2 b√™n cho ƒë·∫πp */
}

.intro-gallery {
  flex: 1 1 40%;                /* ·∫¢nh chi·∫øm 40% */
  display: flex;
  flex-direction: column;
  gap: 16px;
  align-items: center;
  justify-content: center;
}

.intro-gallery img {
  width: 100%;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.intro-gallery img:hover {
  transform: scale(1.03);
  box-shadow: 0 0 25px rgba(255, 140, 0, 0.5);
}

/* Khi thu nh·ªè m√†n h√¨nh (ƒëi·ªán tho·∫°i) -> chuy·ªÉn sang d·ªçc */
@media (max-width: 768px) {
  .intro-content {
    flex-direction: column;
    align-items: center;
  }
  .intro {
    padding: 20px;
    margin: 20px auto;
  }
}


    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    :root{
      --bg-1: linear-gradient(270deg, #000000, #1a1a1a, #222, #000000);
      --bg-2: linear-gradient(270deg, #fff8f0, #fff3e6, #ffe6cc, #fff8f0);
      --card-bg: rgba(20,20,20,0.9);
      --text: #ffffff;
      --accent: #ff9800;
      --glass: rgba(255,255,255,0.06);
    }

   [data-theme="light"] {
  --bg-1: linear-gradient(270deg, #fff8f0, #fff3e6, #ffe6cc, #fff8f0);
  --card-bg: rgba(255,255,255,0.95); /* n·ªÅn tr·∫Øng s√°ng */
  --text: #111111;                   /* ch·ªØ ƒëen ƒë·∫≠m */
  --accent: #ff6f00;
  --glass: rgba(0,0,0,0.06);
}


    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-1);
      background-size: 800% 800%;
      animation: gradientFlow 12s ease infinite;
      margin: 0;
      color: var(--text);
      transition: background 0.6s ease, color 0.4s ease;
    }

    @keyframes gradientFlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* background image */
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://a-static.besthdwallpaper.com/haikyuu-karasuno-team-wallpaper-2560x1600-15261_7.jpg') center/cover no-repeat;
      opacity: 0.18;
      z-index: -2;
      filter: blur(2px) saturate(0.9);
      transition: opacity 0.4s ease;
    }

    header {
      text-align: left;
      padding: 24px 28px;
      background: rgba(0,0,0,0.5);
      border-bottom: 2px solid var(--accent);
      box-shadow: 0 0 20px rgba(255,140,0,0.18);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }

    header .brand {
      display:flex;
      gap:12px;
      align-items:center;
    }

    .logo {
      width:56px;
      height:56px;
      border-radius:10px;
      background: linear-gradient(135deg,#000,#333);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:var(--accent);
      box-shadow: 0 6px 18px rgba(0,0,0,0.4);
    }

    h1 {
      color: var(--accent);
      font-size: 1.4rem;
      margin:0;
      text-shadow: 0 0 10px rgba(255,140,0,0.25);
    }

    header p { margin:0; color: var(--text); opacity:0.9; font-size:0.95rem; }

    /* Controls (top-right) */
    .controls {
      display:flex;
      gap:10px;
      align-items:center;
    }

    .btn {
      background: var(--glass);
      border: 1px solid rgba(255,255,255,0.06);
      color: var(--text);
      padding:8px 12px;
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
      backdrop-filter: blur(4px);
      transition: transform .18s ease, background .2s ease;
      display:inline-flex;
      gap:8px;
      align-items:center;
    }

    .btn:hover{ transform: translateY(-3px); }

    .toggle {
      width:48px;
      height:28px;
      background: rgba(255,255,255,0.06);
      border-radius:20px;
      display:flex;
      align-items:center;
      padding:4px;
      gap:4px;
      cursor:pointer;
    }

    .toggle .dot {
      width:20px;height:20px;border-radius:50%;
      background:var(--accent);
      transition: transform 0.25s ease, background 0.25s ease;
    }

    /* Filter */
    .filter-container {
      text-align: center;
      margin: 18px 0;
    }

    .filter-container select {
      background: rgba(20,20,20,0.6);
      color: white;
      padding: 10px 16px;
      border: 1px solid var(--accent);
      border-radius: 8px;
      font-size: 0.95rem;
      cursor: pointer;
      transition: 0.25s;
    }

    /* Team grid */
    .team-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 22px;
      padding: 18px 28px 80px;
      justify-items: center;
      max-width:1200px;
      margin: 0 auto;
    }

    .player-card {
      position: relative;
      background: var(--card-bg);
      border: 1px solid rgba(0,0,0,0.2);
      border-radius: 14px;
      overflow: hidden;
      text-align: center;
      transition: 0.4s ease;
      width: 240px;
      transform: translateY(20px);
      opacity: 0;
      animation: fadeIn .8s forwards;
      box-shadow: 0 8px 30px rgba(0,0,0,0.35);
      cursor: grab;
    }

    /* staggered animation by JS adds inline style animation-delay */
    @keyframes fadeIn { to { opacity:1; transform: translateY(0); } }

    /* Hover "jump" animation */
    .player-card:hover {
      transform: translateY(-8px) scale(1.03);
      box-shadow: 0 18px 40px rgba(0,0,0,0.5);
    }

    .player-card img {
      width: 100%;
      height: 260px;
      object-fit: cover;
      transition: transform .45s ease, filter .35s ease;
      display:block;
    }

    .player-card:hover img {
      transform: translateY(-6px) scale(1.06) rotate(-1.5deg);
      filter: brightness(1.05);
    }

    .player-info { padding: 12px 12px 18px; }
    .player-name { font-size:1.05rem; color:var(--accent); margin-bottom:6px; font-weight:700; }
    .player-position { font-size:0.88rem; opacity:0.9; color:var(--text); }

    .player-details {
      position: absolute;
      bottom: -100%;
      left: 0;
      width: 100%;
      background: linear-gradient(180deg, rgba(0,0,0,0.75), rgba(0,0,0,0.92));
      color: var(--text);
      padding: 12px;
      transition: bottom .35s ease;
      font-size: 0.88rem;
      text-align: left;
    }

    .player-card:hover .player-details {
      bottom: 0;
    }

    footer {
      text-align: center;
      padding: 22px;
      font-size: 0.85rem;
      color: #aaa;
      background: rgba(0,0,0,0.4);
      border-top: 1px solid rgba(255,255,255,0.03);
      position: fixed;
      left:0; right:0; bottom:0;
      backdrop-filter: blur(4px);
    }

    /* Coach Mode modal */
    .coach-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      background: rgba(2,2,2,0.6);
      backdrop-filter: blur(6px);
      padding: 20px;
    }

    .coach-panel {
      width: min(1100px, 96%);
      background: var(--card-bg);
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      color: var(--text);
      display: grid;
      grid-template-columns: 320px 1fr 260px;
      gap:12px;
      max-height:85vh;
      overflow:hidden;
    }

    .coach-left {
      overflow:auto;
      padding-right:8px;
    }

    .coach-left h3 { margin:0 0 10px 0; color:var(--accent); }
    .player-list { display:flex; flex-direction:column; gap:8px; }

    .coach-card {
      display:flex; gap:10px; align-items:center;
      padding:8px; border-radius:8px; background: rgba(0,0,0,0.12);
      cursor:grab; user-select:none;
    }

    .coach-card img { width:48px; height:48px; object-fit:cover; border-radius:6px; }

    /* court */
    .court {
      background: linear-gradient(180deg,#1a3a2f,#0f2b1f);
      border-radius: 10px;
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:center;
      justify-content:center;
    }

    .court-inner {
      width:100%;
      max-width: 560px;
      aspect-ratio: 16/9;
      position:relative;
      background: linear-gradient(180deg,#f3f3f3,#e6e6e6);
      border-radius:8px;
      box-shadow: inset 0 0 0 2px rgba(0,0,0,0.05);
    }

    .slot {
      width:90px; height:90px; border-radius:50%;
      background: rgba(255,255,255,0.95);
      position:absolute; display:flex; align-items:center; justify-content:center;
      font-size:0.78rem; font-weight:700; color:#222; text-align:center;
      border: 3px dashed rgba(0,0,0,0.06);
      transition: transform .18s ease, box-shadow .12s ease;
      padding:6px;
    }

    .slot.filled { border-style: solid; }

    /* positions on court (approx) */
    .slot.slot-1 { left: 50%; top: 10%; transform: translate(-50%,-50%); } /* setter / front center */
    .slot.slot-2 { left: 20%; top: 30%; transform: translate(-50%,-50%); } /* left front */
    .slot.slot-3 { left: 80%; top: 30%; transform: translate(-50%,-50%); } /* right front */
    .slot.slot-4 { left: 20%; top: 65%; transform: translate(-50%,-50%); } /* left back */
    .slot.slot-5 { left: 80%; top: 65%; transform: translate(-50%,-50%); } /* right back */
    .slot.slot-6 { left: 50%; top: 85%; transform: translate(-50%,-50%); } /* libero/back center */

    .coach-right {
      padding-left:8px;
      overflow:auto;
    }

    .summary {
      background: rgba(0,0,0,0.06);
      padding:10px; border-radius:8px;
    }

    .small { font-size:0.85rem; opacity:0.9; }
    .muted { opacity:0.7; font-size:0.86rem; }

    /* responsive */
    @media (max-width:980px){
      .coach-panel { grid-template-columns: 1fr; max-height:92vh; overflow:auto; }
      .coach-right { order:3; }
    }
/* --- ƒê·∫£m b·∫£o t∆∞∆°ng ph·∫£n gi·ªØa ch·ªØ v√† n·ªÅn --- */
.player-card {
  color: var(--text);
  background: var(--card-bg);
}

/* Khi ·ªü white mode, th√™m vi·ªÅn v√† b√≥ng nh·∫π ƒë·ªÉ t√°ch n·ªÅn */
[data-theme="light"] .player-card {
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  border: 1px solid rgba(0,0,0,0.05);
}

.player-details,
.player-info,
.player-name,
.player-position {
  color: var(--text) !important;
}

/* l√†m n·ªïi b·∫≠t c√°c nh√£n trong c·∫£ 2 theme */
.player-details b {
  color: var(--accent);
}
/* --- ƒê·ªïi m√†u n·ªÅn chi ti·∫øt khi ·ªü white mode --- */
[data-theme="light"] .player-details {
  background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.95));
  color: #111 !important;     /* ch·ªØ ƒëen r√µ */
}

[data-theme="light"] .player-details b {
  color: #ff6f00;             /* m√†u cam nh·∫•n cho c√°c ti√™u ƒë·ªÅ */
}
.video-container {
  margin-top: 10px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 0 12px rgba(0,0,0,0.3);
}


  </style>
</head>
<body data-theme="dark">

<header>


  <div class="brand">
    <div class="logo">Kar</div>
    <div>
      <h1>üèê Karasuno Volleyball Team (2012‚Äì2013)</h1>
      <p>ƒê·ªôi b√≥ng chuy·ªÅn trung h·ªçc Karasuno - ‚ÄúThe Flightless Crows‚Äù</p>
    </div>
  </div>

  <div class="controls">
    <label class="small muted">Nh·∫°c</label>
    <button id="musicToggle" class="btn" title="B·∫≠t/t·∫Øt nh·∫°c">üîä B·∫≠t nh·∫°c</button>

    <label class="small muted">Giao di·ªán</label>
    <div id="themeToggle" class="toggle" title="Ch·∫ø ƒë·ªô s√°ng/t·ªëi">
      <div class="dot"></div>
    </div>

    <button id="coachBtn" class="btn" title="V√†o Coach Mode">üß¢ Coach Mode</button>
  </div>
</header>
<!-- PH·∫¶N TI·ªÇU S·ª¨ KARASUNO -->
<section class="intro">
  <div class="intro-content">
    <div class="intro-text">
      <h2>üè´ Ti·ªÉu s·ª≠ Tr∆∞·ªùng Trung h·ªçc Karasuno</h2>
      <p>
        Tr∆∞·ªùng trung h·ªçc <b>Karasuno</b> (ÁÉèÈáéÈ´òÊ†°, Karasuno K≈çk≈ç) n·∫±m t·∫°i t·ªânh Miyagi, Nh·∫≠t B·∫£n. ƒê√¢y l√† n∆°i t·ª´ng c√≥ ƒë·ªôi b√≥ng chuy·ªÅn nam huy·ªÅn tho·∫°i, n·ªïi danh l√† "<i>Nh·ªØng con qu·∫° m·∫°nh m·∫Ω c·ªßa mi·ªÅn B·∫Øc</i>". 
        Sau th·ªùi k·ª≥ ho√†ng kim, Karasuno d·∫ßn ƒë√°nh m·∫•t phong ƒë·ªô v√† b·ªã g·ªçi v·ªõi bi·ªát danh "<i>Nh·ªØng con qu·∫° kh√¥ng th·ªÉ bay</i>".
      </p>
      <p>
        M·ªçi th·ª© thay ƒë·ªïi khi <b>Sh≈çy≈ç Hinata</b> c√πng <b>Tobio Kageyama</b> gia nh·∫≠p ƒë·ªôi b√≥ng. 
        D∆∞·ªõi s·ª± d·∫´n d·∫Øt c·ªßa ƒë·ªôi tr∆∞·ªüng <b>Daichi Sawamura</b> v√† hu·∫•n luy·ªán vi√™n <b>Keishin Ukai</b>, 
        Karasuno t√°i sinh v·ªõi l·ªëi ch∆°i t·ªëc ƒë·ªô v√† tinh th·∫ßn ƒë·ªìng ƒë·ªôi m·∫°nh m·∫Ω, n·ªïi b·∫≠t v·ªõi chi·∫øn thu·∫≠t ‚Äú<b>Freak Quick</b>‚Äù.
      </p>
      <p>
        Sau nhi·ªÅu n·ªó l·ª±c, Karasuno ƒë√£ l·∫•y l·∫°i danh ti·∫øng, ti·∫øn t·ªõi gi·∫£i v√¥ ƒë·ªãch qu·ªëc gia v√† t√°i l·∫≠p ‚Äú<i>Tr·∫≠n chi·∫øn ·ªü b√£i r√°c</i>‚Äù l·ªãch s·ª≠ v·ªõi Nekoma. 
        H·ªç ƒë√£ ch·ª©ng minh: D√π ƒë√¥i c√°nh t·ª´ng g√£y, ‚ÄúNh·ªØng con qu·∫° Karasuno‚Äù v·∫´n c√≥ th·ªÉ bay cao m·ªôt l·∫ßn n·ªØa.
      </p>
<a href="https://www.bilibili.tv/vi/video/4794307460861952" target="_blank" class="btn bio-btn">
    üé¨ Movie Haikyuu! Tr·∫≠n Chi·∫øn B√£i Ph·∫ø Li·ªáu
  </a>
</p>
<a href="https://www.youtube.com/watch?v=_muTDdDSHwQ" target="_blank" class="btn bio-btn">
    üé¨ T·ªîNG H·ª¢P "Vua B√≥ng Chuy·ªÅn" | Season 1+2+3+4 |
  </a>
</p>
<a href="https://www.youtube.com/watch?v=VKviyEGvb94&list=RDVKviyEGvb94&start_radio=1" target="_blank" class="btn bio-btn">
    üé¨ Fly High - Haikyuu [ AMV ]
  </a>
    </div>

    <div class="intro-gallery">
      <img src="https://static.wikia.nocookie.net/haikyuu/images/a/a0/Karasuno1.png/revision/latest/scale-to-width-down/1000?cb=20150612002900" alt="Karasuno School">
      <img src="https://static.wikia.nocookie.net/haikyuu/images/e/e5/Hinata_s1-e1-1.png/revision/latest/scale-to-width-down/1000?cb=20200508104838" alt="Hinata Shoyo">
      <img src="https://static.wikia.nocookie.net/haikyuu/images/3/33/Karasuno_s4-e25-1.png/revision/latest/scale-to-width-down/1000?cb=20210212132812" alt="Karasuno team match">
    </div>
  </div>
</section>

<div class="filter-container">
  <label for="positionFilter">L·ªçc theo v·ªã tr√≠: </label>
  <select id="positionFilter">
    <option value="all">T·∫•t c·∫£</option>
    <option value="setter">Setter</option>
    <option value="spiker">Wing Spiker</option>
    <option value="middle">Middle Blocker</option>
    <option value="libero">Libero</option>
    <option value="coach">HLV</option>
  </select>
</div>

<div class="team-container" id="teamContainer">
  <!-- 1. Shoyo Hinata -->
  <div class="player-card" data-position="middle" data-name="Sh≈çy≈ç Hinata" data-height="162.8" data-id="p10" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/d/d2/Hinata_s4-e1-4.png" alt="Shoyo Hinata">
    <div class="player-info">
      <div class="player-name">Sh≈çy≈ç Hinata</div>
      <div class="player-position">Middle Blocker</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 162.8 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 51.9 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 333 cm</p>
      <p><b>S·ªë √°o:</b> 10</p>
    </div>
  </div>

  <!-- 2. Tobio Kageyama -->
  <div class="player-card" data-position="setter" data-name="Tobio Kageyama" data-height="180.6" data-id="p9" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/e/e7/Kageyama_s4-e7-3.png" alt="Tobio Kageyama">
    <div class="player-info">
      <div class="player-name">Tobio Kageyama</div>
      <div class="player-position">Setter</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 180.6 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 66.3 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 335 cm</p>
      <p><b>S·ªë √°o:</b> 9</p>
    </div>
  </div>

  <!-- 3. Daichi Sawamura -->
  <div class="player-card" data-position="spiker" data-name="Daichi Sawamura" data-height="176.8" data-id="p1" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/a/a5/Daichi_s4-e11-2.png/revision/latest?cb=20200519171030" alt="Daichi Sawamura">
    <div class="player-info">
      <div class="player-name">Daichi Sawamura</div>
      <div class="player-position">Wing Spiker (ƒê·ªôi tr∆∞·ªüng)</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 176.8 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 75.2 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 315 cm</p>
      <p><b>S·ªë √°o:</b> 1</p>
    </div>
  </div>

  <!-- 4. Koshi Sugawara -->
  <div class="player-card" data-position="setter" data-name="K≈çshi Sugawara" data-height="174.3" data-id="p2" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/d/d5/Sugawara_s4-e6-1.png/revision/latest?cb=20200515113126" alt="Koshi Sugawara">
    <div class="player-info">
      <div class="player-name">K≈çshi Sugawara</div>
      <div class="player-position">Setter</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 174.3 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 63.5 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 320 cm</p>
      <p><b>S·ªë √°o:</b> 2</p>
    </div>
  </div>

  <!-- 5. Asahi Azumane -->
  <div class="player-card" data-position="spiker" data-name="Asahi Azumane" data-height="184.7" data-id="p3" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/7/7d/Asahi_s4-e1-1.png/revision/latest?cb=20201214055958" alt="Asahi Azumane">
    <div class="player-info">
      <div class="player-name">Asahi Azumane</div>
      <div class="player-position">Wing Spiker (Ace)</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 184.7 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 75.2 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 330 cm</p>
      <p><b>S·ªë √°o:</b> 3</p>
    </div>
  </div>

  <!-- 6. Yu Nishinoya -->
  <div class="player-card" data-position="libero" data-name="Y≈´ Nishinoya" data-height="160.5" data-id="p4" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/7/73/Y%C5%AB_Nishinoya.PNG/revision/latest?cb=20140614115959" alt="Yu Nishinoya">
    <div class="player-info">
      <div class="player-name">Y≈´ Nishinoya</div>
      <div class="player-position">Libero</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 160.5 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 51.1 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 325 cm</p>
      <p><b>S·ªë √°o:</b> 4</p>
    </div>
  </div>

  <!-- 7. Ryunosuke Tanaka -->
  <div class="player-card" data-position="spiker" data-name="Ry≈´nosuke Tanaka" data-height="178.2" data-id="p5" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/9/9a/Tanaka_s4-e16-6.png/revision/latest/scale-to-width-down/1000?cb=20201016204806" alt="Ryunosuke Tanaka">
    <div class="player-info">
      <div class="player-name">Ry≈´nosuke Tanaka</div>
      <div class="player-position">Wing Spiker</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 178.2 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 68.8 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 325 cm</p>
      <p><b>S·ªë √°o:</b> 5</p>
    </div>
  </div>

  <!-- 8. Kei Tsukishima -->
  <div class="player-card" data-position="middle" data-name="Kei Tsukishima" data-height="190.1" data-id="p11" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/7/73/Tsukishima_s4-e6-2.png/revision/latest?cb=20200519170528" alt="Kei Tsukishima">
    <div class="player-info">
      <div class="player-name">Kei Tsukishima</div>
      <div class="player-position">Middle Blocker</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 190.1 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 68.4 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 323 cm</p>
      <p><b>S·ªë √°o:</b> 11</p>
    </div>
  </div>

  <!-- 9. Tadashi Yamaguchi -->
  <div class="player-card" data-position="middle" data-name="Tadashi Yamaguchi" data-height="179.5" data-id="p12" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/9/93/Yamaguchi_s4-e3-1.jpg/revision/latest/scale-to-width-down/1000?cb=20200604003944" alt="Tadashi Yamaguchi">
    <div class="player-info">
      <div class="player-name">Tadashi Yamaguchi</div>
      <div class="player-position">Middle Blocker (Pinch Server)</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 179.5 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 63.0 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 310 cm</p>
      <p><b>S·ªë √°o:</b> 12</p>
    </div>
  </div>

  <!-- 10. Chikara Ennoshita -->
  <div class="player-card" data-position="spiker" data-name="Chikara Ennoshita" data-height="175.4" data-id="p6" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/3/33/Ennoshita.png/revision/latest/scale-to-width-down/1000?cb=20140912052040" alt="Chikara Ennoshita">
    <div class="player-info">
      <div class="player-name">Chikara Ennoshita</div>
      <div class="player-position">Wing Spiker (Ph√≥ ƒë·ªôi tr∆∞·ªüng)</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 175.4 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 66.4 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 310 cm</p>
      <p><b>S·ªë √°o:</b> 6</p>
    </div>
  </div>

  <!-- 11. Hisashi Kinoshita -->
  <div class="player-card" data-position="spiker" data-name="Hisashi Kinoshita" data-height="174.7" data-id="p7" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/6/6e/Kinoshita_s4-e5-1.png/revision/latest/scale-to-width-down/1000?cb=20200211081427" alt="Hisashi Kinoshita">
    <div class="player-info">
      <div class="player-name">Hisashi Kinoshita</div>
      <div class="player-position">Wing Spiker</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 174.7 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 63.0 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 305 cm</p>
      <p><b>S·ªë √°o:</b> 7</p>
    </div>
  </div>

  <!-- 12. Kazuhito Narita -->
  <div class="player-card" data-position="middle" data-name="Kazuhito Narita" data-height="180.3" data-id="p8" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/e/e7/Narita_s4-e6-1.png/revision/latest?cb=20211212065812" alt="Kazuhito Narita">
    <div class="player-info">
      <div class="player-name">Kazuhito Narita</div>
      <div class="player-position">Middle Blocker</div>
    </div>
    <div class="player-details">
      <p><b>Chi·ªÅu cao:</b> 180.3 cm</p>
      <p><b>C√¢n n·∫∑ng:</b> 70.2 kg</p>
      <p><b>S·ª©c b·∫≠t:</b> 315 cm</p>
      <p><b>S·ªë √°o:</b> 8</p>
    </div>
  </div>

  <!-- 13. Hu·∫•n luy·ªán vi√™n Ukai Keishin -->
  <div class="player-card" data-position="coach" data-name="Keishin Ukai" data-height="26" data-id="coach" draggable="false">
    <img src="https://static.wikia.nocookie.net/haikyuu/images/9/9d/Ukai_s4-e7-1.png/revision/latest/scale-to-width-down/1000?cb=20200604102109" alt="Ukai Keishin">
    <div class="player-info">
      <div class="player-name">Keishin Ukai</div>
      <div class="player-position">Hu·∫•n luy·ªán vi√™n</div>
    </div>
    <div class="player-details">
      <p><b>Tu·ªïi:</b> 26</p>
      <p><b>Ngh·ªÅ:</b> HLV ƒë·ªôi Karasuno</p>
      <p><b>Bi·ªát danh:</b> "Coach Ukai"</p>
    </div>
  </div>
</div>

<footer>¬© 2025 Karasuno Volleyball Club - Thi·∫øt k·∫ø b·ªüi TMinh üòé</footer>

<!-- Coach Modal -->
<div id="coachModal" class="coach-modal" aria-hidden="true">
  <div class="coach-panel" role="dialog" aria-modal="true">
    <div class="coach-left">
      <h3>Danh s√°ch c·∫ßu th·ªß</h3>
      <div class="player-list" id="coachPlayerList">
        <!-- JS s·∫Ω sinh danh s√°ch k√©o th·∫£ ·ªü ƒë√¢y -->
      </div>
      <div style="margin-top:12px;">
        <label class="small muted">Ho·∫∑c upload nh·∫°c n·ªÅn (mp3) cho trang:</label><br>
        <input id="musicFile" type="file" accept="audio/*" style="margin-top:8px;">
      </div>
    </div>

    <div class="court" aria-label="S√¢n b√≥ng">
      <div style="display:flex; width:100%; justify-content:space-between; align-items:center;">
        <div style="color:var(--accent); font-weight:800;">üèê Coach Mode</div>
        <div style="display:flex; gap:8px;">
          <button id="clearSlots" class="btn">X√≥a ƒë·ªôi</button>
          <button id="saveLineup" class="btn">L∆∞u ƒë·ªôi</button>
          <button id="closeCoach" class="btn">ƒê√≥ng</button>
        </div>
      </div>

      <div class="court-inner" id="courtInner" aria-hidden="false">
        <div class="slot slot-1" data-slot="1">Setter</div>
        <div class="slot slot-2" data-slot="2">Left Front</div>
        <div class="slot slot-3" data-slot="3">Right Front</div>
        <div class="slot slot-4" data-slot="4">Left Back</div>
        <div class="slot slot-5" data-slot="5">Right Back</div>
        <div class="slot slot-6" data-slot="6">Libero</div>
      </div>
    </div>

    <div class="coach-right">
      <h3>T·ªïng quan</h3>
      <div class="summary">
        <p class="small">ƒê·ªôi ƒë√£ ch·ªçn: <span id="pickedCount">0</span>/6</p>
        <p class="small">Chi·ªÅu cao trung b√¨nh: <strong id="avgHeight">0</strong> cm</p>
        <div style="margin-top:10px;">
          <h4 class="small">ƒê·ªôi h√¨nh hi·ªán t·∫°i</h4>
          <ol id="lineupList" style="padding-left:18px; margin-top:6px;"></ol>
        </div>
      </div>

      <div style="margin-top:12px;">
        <h4 class="small">H∆∞·ªõng d·∫´n</h4>
        <p class="muted small">K√©o m·ªôt c·∫ßu th·ªß t·ª´ danh s√°ch sang v·ªã tr√≠ b·∫°n mu·ªën. B·∫°n c√≥ th·ªÉ b·ªè v√†o t·ªëi ƒëa 6 ng∆∞·ªùi. Nh·∫°c n·ªÅn c√≥ th·ªÉ t·∫Øt/b·∫≠t t·ª´ thanh tr√™n.</p>
      </div>
    </div>
  </div>
</div>

<script>
  /***** Initialization and helper data *****/
  const filter = document.getElementById('positionFilter');
  const cards = document.querySelectorAll('.player-card');
  const teamContainer = document.getElementById('teamContainer');

  // Staggered entrance
  document.querySelectorAll('.player-card').forEach((c, i) => {
    c.style.animationDelay = (i * 0.06) + 's';
  });

  // Filter logic
  filter.addEventListener('change', () => {
    const value = filter.value;
    document.querySelectorAll('.player-card').forEach(card => {
      if (value === 'all' || card.dataset.position === value) {
        card.style.display = 'block';
        card.style.opacity = '1';
        card.style.transform = 'scale(1)';
      } else {
        card.style.opacity = '0';
        card.style.transform = 'scale(0.9)';
        setTimeout(() => { card.style.display = 'none'; }, 350);
      }
    });
  });

  /* IntersectionObserver for reveal on scroll (subtle) */
  const io = new IntersectionObserver((entries) => {
    entries.forEach(ent => {
      if (ent.isIntersecting) ent.target.style.opacity = 1;
    });
  }, { threshold: 0.12 });

  document.querySelectorAll('.player-card').forEach(c => io.observe(c));

  /***** Theme toggle (light/dark) *****/
  const themeToggle = document.getElementById('themeToggle');
  const body = document.body;
  const dot = themeToggle.querySelector('.dot');

  // initialize from localStorage
  const storedTheme = localStorage.getItem('karasuno_theme') || 'dark';
  body.setAttribute('data-theme', storedTheme === 'light' ? 'light' : 'dark');
  if (storedTheme === 'light') dot.style.transform = 'translateX(20px)'; else dot.style.transform = 'translateX(0)';

  themeToggle.addEventListener('click', () => {
    const current = body.getAttribute('data-theme') === 'light' ? 'light' : 'dark';
    const next = current === 'light' ? 'dark' : 'light';
    body.setAttribute('data-theme', next);
    localStorage.setItem('karasuno_theme', next);
    if (next === 'light') dot.style.transform = 'translateX(20px)'; else dot.style.transform = 'translateX(0)';
  });

  /***** Simple background music using Web Audio API + optional file upload *****/
  let audioCtx = null;
  let bgGain = null;
  let isPlaying = false;
  const musicToggle = document.getElementById('musicToggle');
  const musicFileInput = document.getElementById('musicFile');
  let fileBuffer = null;
  let fileSource = null;

  function createAudioContext(){
    if (!audioCtx) {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      bgGain = audioCtx.createGain();
      bgGain.gain.value = 0.12; // default volume
      bgGain.connect(audioCtx.destination);
    }
  }

  // Basic loop synth (pleasant warm pulse) as default
  let synthOsc = null;
  let synthGain = null;
  function startDefaultLoop(){
    if (!audioCtx) createAudioContext();
    // create simple repeating tone using oscillator + periodic ramp of gain
    synthOsc = audioCtx.createOscillator();
    synthGain = audioCtx.createGain();
    synthOsc.type = 'sawtooth';
    synthOsc.frequency.value = 220; // base
    synthGain.gain.value = 0;
    // slightly modulate frequency
    const lfo = audioCtx.createOscillator();
    const lfoGain = audioCtx.createGain();
    lfo.frequency.value = 0.25;
    lfoGain.gain.value = 10;
    lfo.connect(lfoGain);
    lfoGain.connect(synthOsc.frequency);
    synthOsc.connect(synthGain);
    synthGain.connect(bgGain);
    synthOsc.start();
    lfo.start();

    // rhythmic amplitude pulsing
    let t = 0;
    const pulse = () => {
      if (!synthGain) return;
      // pulse envelope
      synthGain.gain.cancelScheduledValues(audioCtx.currentTime);
      synthGain.gain.setValueAtTime(0, audioCtx.currentTime);
      synthGain.gain.linearRampToValueAtTime(0.06, audioCtx.currentTime + 0.02);
      synthGain.gain.linearRampToValueAtTime(0.0, audioCtx.currentTime + 0.5);
      t = (t + 1) % 2;
      if (isPlaying) setTimeout(pulse, 500);
    };
    isPlaying = true;
    pulse();
  }

  function stopDefaultLoop(){
    try {
      if (synthOsc) { synthOsc.stop(); synthOsc.disconnect(); synthOsc = null; }
      if (synthGain) { synthGain.disconnect(); synthGain = null; }
      isPlaying = false;
    } catch(e){}
  }

  musicToggle.addEventListener('click', async () => {
    if (!audioCtx) createAudioContext();
    if (!isPlaying && !fileBuffer) {
      // start default loop
      startDefaultLoop();
      musicToggle.textContent = 'üîà T·∫Øt nh·∫°c';
      return;
    }
    if (!isPlaying && fileBuffer) {
      // play file
      fileSource = audioCtx.createBufferSource();
      fileSource.buffer = fileBuffer;
      fileSource.loop = true;
      fileSource.connect(bgGain);
      fileSource.start();
      isPlaying = true;
      musicToggle.textContent = 'üîà T·∫Øt nh·∫°c';
      return;
    }
    // stop everything
    if (fileSource) { try { fileSource.stop(); fileSource.disconnect(); fileSource = null; } catch(e){} }
    stopDefaultLoop();
    musicToggle.textContent = 'üîä B·∫≠t nh·∫°c';
  });

  // upload file -> decode
  if (musicFileInput){
    musicFileInput.addEventListener('change', async (e) => {
      const f = e.target.files[0];
      if (!f) return;
      const arr = await f.arrayBuffer();
      createAudioContext();
      audioCtx.decodeAudioData(arr, (buffer) => {
        fileBuffer = buffer;
        // if currently playing default synth, stop it and switch to file
        if (synthOsc) { stopDefaultLoop(); }
        // start file if musicToggle indicates on
        if (musicToggle.textContent.includes('T·∫Øt')) {
          const src = audioCtx.createBufferSource();
          src.buffer = fileBuffer;
          src.loop = true;
          src.connect(bgGain);
          src.start();
          fileSource = src;
          isPlaying = true;
        }
      }, (err)=>{ console.warn('decodeAudioData failed', err); });
    });
  }

  /***** Coach Mode: drag & drop *****/
  const coachBtn = document.getElementById('coachBtn');
  const coachModal = document.getElementById('coachModal');
  const coachPlayerList = document.getElementById('coachPlayerList');
  const closeCoach = document.getElementById('closeCoach');
  const courtInner = document.getElementById('courtInner');
  const slots = Array.from(document.querySelectorAll('.slot'));
  const pickedCountEl = document.getElementById('pickedCount');
  const avgHeightEl = document.getElementById('avgHeight');
  const lineupList = document.getElementById('lineupList');
  const clearSlotsBtn = document.getElementById('clearSlots');
  const saveLineupBtn = document.getElementById('saveLineup');

  // Data from existing cards
  const players = Array.from(document.querySelectorAll('.player-card'))
    .filter(c => c.dataset.position !== 'coach') // exclude coach
    .map(c => ({
      id: c.dataset.id,
      name: c.dataset.name,
      height: Number(c.dataset.height),
      position: c.dataset.position,
      img: c.querySelector('img')?.src || ''
    }));

  // build coach list
  function populateCoachList(){
    coachPlayerList.innerHTML = '';
    players.forEach(p => {
      const div = document.createElement('div');
      div.className = 'coach-card';
      div.draggable = true;
      div.dataset.playerId = p.id;
      div.dataset.name = p.name;
      div.dataset.height = p.height;
      div.dataset.position = p.position;
      div.innerHTML = `<img src="${p.img}" alt="${p.name}"><div><strong style="font-size:0.95rem">${p.name}</strong><div class="muted" style="font-size:0.79rem">${p.position} ‚Ä¢ ${p.height} cm</div></div>`;
      coachPlayerList.appendChild(div);

      // drag handlers
      div.addEventListener('dragstart', (ev) => {
        ev.dataTransfer.setData('text/plain', JSON.stringify({
          id: p.id, name: p.name, height: p.height, img: p.img, position: p.position
        }));
      });
    });
  }

  // open modal
  coachBtn.addEventListener('click', () => {
    coachModal.style.display = 'flex';
    coachModal.setAttribute('aria-hidden', 'false');
    populateCoachList();
    // pause music for focus
    if (isPlaying) {
      // visually indicate but do not stop; optional: stopDefaultLoop();
    }
  });

  // close modal
  closeCoach.addEventListener('click', () => {
    coachModal.style.display = 'none';
    coachModal.setAttribute('aria-hidden', 'true');
    updateSummary();
  });

  // Clear slots
  clearSlotsBtn.addEventListener('click', () => {
    slots.forEach(s => {
      s.innerHTML = s.dataset.slotLabel || s.textContent;
      s.classList.remove('filled');
      s.dataset.player = '';
      s.dataset.playerName = '';
      s.dataset.playerHeight = '';
    });
    updateSummary();
  });

  // Save lineup (simple alert preview)
  saveLineupBtn.addEventListener('click', () => {
    const lineup = slots.map(s => s.dataset.playerName || '‚Äî');
    alert('ƒê·ªôi ƒë√£ l∆∞u:\\n' + lineup.map((n,i)=>`#${i+1}: ${n}`).join('\\n'));
  });

  // setup drop targets
  slots.forEach(slot => {
    slot.addEventListener('dragover', (e) => { e.preventDefault(); slot.style.transform = 'scale(1.04)'; slot.style.boxShadow = '0 8px 20px rgba(0,0,0,0.3)'; });
    slot.addEventListener('dragleave', (e) => { slot.style.transform = ''; slot.style.boxShadow = ''; });
    slot.addEventListener('drop', (e) => {
      e.preventDefault();
      slot.style.transform = ''; slot.style.boxShadow = '';
      const raw = e.dataTransfer.getData('text/plain');
      if (!raw) return;
      const p = JSON.parse(raw);
      // set into slot
      slot.innerHTML = `<div style="display:flex;flex-direction:column;align-items:center;gap:6px;"><img src="${p.img}" style="width:64px;height:64px;border-radius:8px;object-fit:cover;"><div style="font-weight:800;font-size:0.86rem">${p.name}</div><div class="muted" style="font-size:0.78rem">${p.position}</div></div>`;
      slot.classList.add('filled');
      slot.dataset.player = p.id;
      slot.dataset.playerName = p.name;
      slot.dataset.playerHeight = p.height;
      updateSummary();
    });
  });

  function updateSummary(){
    const filled = slots.filter(s => s.dataset.player);
    pickedCountEl.textContent = filled.length;
    if (filled.length > 0){
      const avg = (filled.reduce((sum,s)=> sum + Number(s.dataset.playerHeight||0),0) / filled.length);
      avgHeightEl.textContent = Math.round(avg * 10)/10;
    } else avgHeightEl.textContent = 0;
    // lineup list
    lineupList.innerHTML = '';
    filled.forEach((s,i) => {
      const li = document.createElement('li');
      li.textContent = `${s.dataset.playerName} ‚Äî ${s.dataset.playerHeight} cm`;
      lineupList.appendChild(li);
    });
  }

  // allow click on coach list items to auto-fill first empty slot
  coachPlayerList.addEventListener('click', (e) => {
    const card = e.target.closest('.coach-card');
    if (!card) return;
    const data = { id: card.dataset.playerId, name: card.dataset.name, height: card.dataset.height, img: card.querySelector('img').src, position: card.dataset.position };
    const empty = slots.find(s=>!s.dataset.player);
    if (!empty) { alert('ƒê√£ ƒë·∫ßy 6 v·ªã tr√≠. X√≥a m·ªôt v·ªã tr√≠ ho·∫∑c nh·∫•n "X√≥a ƒë·ªôi"'); return; }
    empty.innerHTML = `<div style="display:flex;flex-direction:column;align-items:center;gap:6px;"><img src="${data.img}" style="width:64px;height:64px;border-radius:8px;object-fit:cover;"><div style="font-weight:800;font-size:0.86rem">${data.name}</div><div class="muted" style="font-size:0.78rem">${data.position}</div></div>`;
    empty.classList.add('filled');
    empty.dataset.player = data.id;
    empty.dataset.playerName = data.name;
    empty.dataset.playerHeight = data.height;
    updateSummary();
  });


  /***** Small UI polish: make original player-cards draggable clones for coach mode when opening modal *****/
  // (we used separate coach list so original cards remain read-only)

  /***** Small sound effect when entering coach mode *****/
  closeCoach.addEventListener('click', ()=> {
    // small click using oscillator
    if (!audioCtx) return;
    const osc = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    osc.connect(g);
    g.connect(audioCtx.destination);
    osc.frequency.value = 700;
    g.gain.value = 0.0001;
    const now = audioCtx.currentTime;
    g.gain.exponentialRampToValueAtTime(0.08, now + 0.01);
    g.gain.exponentialRampToValueAtTime(0.001, now + 0.18);
    osc.start();
    osc.stop(now + 0.2);
  });

  /***** Accessibility: close modal on Escape *****/
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && coachModal.style.display === 'flex') {
      coachModal.style.display = 'none';
      coachModal.setAttribute('aria-hidden','true');
    }
  });

  /***** Small improvement: clicking player-card in main grid will show a short "cheer" sound *****/
  document.querySelectorAll('.player-card').forEach(pc => {
    pc.addEventListener('click', () => {
      // small percussive hit
      if (!audioCtx) createAudioContext();
      const osc = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      osc.type = 'square';
      osc.frequency.setValueAtTime(330 + Math.random()*150, audioCtx.currentTime);
      g.gain.value = 0.0001;
      osc.connect(g);
      g.connect(audioCtx.destination);
      const now = audioCtx.currentTime;
      g.gain.exponentialRampToValueAtTime(0.08, now + 0.01);
      g.gain.exponentialRampToValueAtTime(0.001, now + 0.18);
      osc.start();
      osc.stop(now + 0.18);
    });
  });

  /***** Persist theme on load, if user had set before, keep toggle UI updated *****/
  // already initialized earlier

  /***** Small: allow double-clicking a filled slot to clear it *****/
  slots.forEach(s => {
    s.addEventListener('dblclick', () => {
      s.innerHTML = s.dataset.slotLabel || s.textContent;
      s.classList.remove('filled');
      s.dataset.player = '';
      s.dataset.playerName = '';
      s.dataset.playerHeight = '';
      updateSummary();
    });
  });

  // Create default slot labels (for restoring when cleared)
  slots.forEach(s=> {
    s.dataset.slotLabel = s.textContent;
  });

  /***** Save theme preference on unload (already saved on toggle) *****/
  window.addEventListener('unload', () => {
    // nothing extra
  });

  /***** Small: show coach modal close when clicking outside panel *****/
  coachModal.addEventListener('click', (e) => {
    if (e.target === coachModal) {
      coachModal.style.display = 'none';
      coachModal.setAttribute('aria-hidden','true');
    }
  });

  // Populate coach list initially (just in case)
  populateCoachList();

  // End script
</script>

</body>
</html>
